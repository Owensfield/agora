(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[433],{3506:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>P});var o=l(3673);const n=(0,o._)("div",null,"v0.01",-1),a=(0,o.Uk)(" Owensfield voting system ");function i(e,t,l,i,s,r){const u=(0,o.up)("q-btn"),m=(0,o.up)("q-toolbar-title"),d=(0,o.up)("q-toolbar"),p=(0,o.up)("q-header"),c=(0,o.up)("q-item-label"),h=(0,o.up)("EssentialLink"),w=(0,o.up)("q-list"),g=(0,o.up)("q-drawer"),f=(0,o.up)("q-card-section"),q=(0,o.up)("q-input"),k=(0,o.up)("q-form"),b=(0,o.up)("q-card"),y=(0,o.up)("q-dialog"),W=(0,o.up)("router-view"),Z=(0,o.up)("q-page-container"),v=(0,o.up)("q-layout"),F=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(v,{view:"lHh Lpr lFf"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{elevated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,o.Wm)(m),n,(0,o.Wm)(u,{unelevated:"",color:"primary",label:"Login",icon:"lock",class:"q-ma-md",onClick:t[0]||(t[0]=t=>e.loginFormShow=!0)})])),_:1})])),_:1}),(0,o.Wm)(g,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=t=>e.leftDrawerOpen=t),"show-if-above":"",bordered:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{header:""},{default:(0,o.w5)((()=>[a])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.essentialLinks,(e=>((0,o.wg)(),(0,o.j4)(h,(0,o.dG)({key:e.title},e),null,16)))),128))])),_:1}),(0,o.Wm)(u,{unelevated:"",color:"primary",label:"Login",icon:"lock",class:"q-ma-md",onClick:t[1]||(t[1]=t=>e.loginFormShow=!0)})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{modelValue:e.loginFormShow,"onUpdate:modelValue":t[5]||(t[5]=t=>e.loginFormShow=t),position:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{style:{width:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f),(0,o.Wm)(f,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{onSubmit:e.onSubmit,onReset:e.onReset,class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{filled:"",type:"text",modelValue:e.loginForm.username,"onUpdate:modelValue":t[3]||(t[3]=t=>e.loginForm.username=t),label:"email"},null,8,["modelValue"]),(0,o.Wm)(q,{filled:"",type:"password",modelValue:e.loginForm.password,"onUpdate:modelValue":t[4]||(t[4]=t=>e.loginForm.password=t),label:"Password"},null,8,["modelValue"]),(0,o._)("div",null,[(0,o.Wm)(u,{label:"Submit",type:"submit",color:"primary"}),(0,o.wy)((0,o.Wm)(u,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[F]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W)])),_:1})])),_:1})}var s=l(2323);function r(e,t,l,n,a,i){const r=(0,o.up)("q-icon"),u=(0,o.up)("q-item-section"),m=(0,o.up)("q-item-label"),d=(0,o.up)("q-item");return(0,o.wg)(),(0,o.j4)(d,{clickable:"",tag:"a",target:"_blank",href:e.link},{default:(0,o.w5)((()=>[e.icon?((0,o.wg)(),(0,o.j4)(u,{key:0,avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{name:e.icon},null,8,["name"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.title),1)])),_:1}),(0,o.Wm)(m,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.caption),1)])),_:1})])),_:1})])),_:1},8,["href"])}const u=(0,o.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});var m=l(4260),d=l(3414),p=l(2035),c=l(4554),h=l(2350),w=l(7518),g=l.n(w);const f=(0,m.Z)(u,[["render",r]]),q=f;g()(u,"components",{QItem:d.Z,QItemSection:p.Z,QIcon:c.Z,QItemLabel:h.Z});var k=l(1849),b=l.n(k),y=l(1959),W=l(9058);const Z=[{title:"Main",caption:"View all polls",icon:"home",link:"./"}],v=(0,o.aZ)({name:"MainLayout",components:{EssentialLink:q},setup(){const e=(0,y.iH)(!1);return{loginFormShow:(0,y.iH)(!1),loginForm:{},essentialLinks:Z,leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value}}},methods:{onSubmit(){var e=b().HmacSHA512(this.loginForm.username,this.loginForm.password);this.loginForm.userHash=b().enc.Base64.stringify(e),console.log(this.loginForm),this.makeRequest("POST","https://owensfield.nostrfy.com/login",this.loginForm),window.localStorage.setItem("userHash",this.loginForm.userHash)},onReset(){},makeRequest(e,t,l=null){if(this.httpRequest=new XMLHttpRequest,!this.httpRequest)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;this.httpRequest.onreadystatechange=this.alertContents,this.httpRequest.open(e,t),this.httpRequest.send()},alertContents(){this.httpRequest.readyState===XMLHttpRequest.DONE&&(200===this.httpRequest.status?alert(this.httpRequest.responseText):alert("Backend server could not be reached"))}},created(){W.Z.set(!0),this.loginForm.userHash=window.localStorage.getItem("userHash"),console.log(this.loginForm.userHash),this.loginForm.userHash&&this.makeRequest("POST","https://owensfield.nostrfy.com/login",this.loginForm)}});var F=l(3066),S=l(3812),Q=l(9570),_=l(522),L=l(3747),H=l(2428),R=l(7011),C=l(9815),V=l(151),D=l(5589),I=l(8689),T=l(7216),O=l(2652),U=l(677);const M=(0,m.Z)(v,[["render",i]]),P=M;g()(v,"components",{QLayout:F.Z,QHeader:S.Z,QToolbar:Q.Z,QBtn:_.Z,QToolbarTitle:L.Z,QDrawer:H.Z,QList:R.Z,QItemLabel:h.Z,QDialog:C.Z,QCard:V.Z,QCardSection:D.Z,QForm:I.Z,QInput:T.Z,QPageContainer:O.Z}),g()(v,"directives",{ClosePopup:U.Z})},2480:()=>{}}]);